<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button onclick="showTime()">Show time</button>
    <audio id="xyz" src="alarm.wav" preload="auto"></audio>
    <h3></h3>
    <h2>SCHULGLOCKE!!!</h2>
    <script>
      function showTime() {
        document.querySelector("h3").style.display = "block";
      }

      const times = [
        { hour: 8, minute: 0 },
        { hour: 8, minute: 50 },
        { hour: 8, minute: 55 },
        { hour: 9, minute: 45 },
        { hour: 10, minute: 0 },
        { hour: 10, minute: 50 },
        { hour: 10, minute: 55 },
        { hour: 11, minute: 45 },
        { hour: 11, minute: 50 },
        { hour: 12, minute: 40 },
        { hour: 12, minute: 45 },
        { hour: 13, minute: 35 },
        { hour: 13, minute: 40 },
        { hour: 14, minute: 30 },
        { hour: 14, minute: 35 },
        { hour: 15, minute: 25 },
        { hour: 15, minute: 30 },
        { hour: 16, minute: 20 },
        { hour: 16, minute: 25 },
        { hour: 17, minute: 15 },
      ];
      // make a function that is executed at 8:00 am
      setInterval(() => {
        times.forEach((time) => {
          document.querySelector("h3").innerHTML =
            getFormattedTime(new Date().getHours()) +
            ":" +
            getFormattedTime(new Date().getMinutes()) +
            ":" +
            getFormattedTime(new Date().getSeconds());
          if (
            new Date().getHours() === time.hour &&
            new Date().getMinutes() === time.minute &&
            new Date().getSeconds() === 0
          ) {
            // if it is 8:00 am, push the time to the times array
            // sound from freesound.org
            document.getElementById("xyz").play();
            console.log("alarm");

            let interval = setInterval(() => {
              if (document.querySelector("h2").style.display === "block") {
                document.querySelector("h2").style.display = "none";
              } else {
                document.querySelector("h2").style.display = "block";
              }
            }, 500);

            setTimeout(() => {
              clearInterval(interval);
              document.querySelector("h2").style.display = "none";
            }, 5000);
          }
        });
        // check if the time is 8:00 am
      }, 500);

      setInterval(() => {
        window.reload();
      }, 2000 * 60);

      function getFormattedTime(time) {
        return time < 10 ? "0" + time : time;
      }
    </script>
    <style>
      body {
        background-color: black;
        color: white;
        font-size: 100px;
        text-align: center;
      }
      h2,
      h3 {
        display: none;
      }
    </style>
  </body>
</html>
